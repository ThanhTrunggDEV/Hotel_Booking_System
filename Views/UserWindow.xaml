<Window x:Class="Hotel_Booking_System.Views.UserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Hotel_Booking_System.Views"
        mc:Ignorable="d"
        xmlns:bh="clr-namespace:Hotel_Booking_System.Behaviors"
        Title="Hotel Booking System" Height="900" Width="1200"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize">

    <Window.WindowState>Maximized</Window.WindowState>


    <Grid Background="#FFF8F9FA">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>


        <Grid Grid.Row="0" Background="#FF1976D2" Height="80">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0">
                <!--<TextBlock Text="🏨" FontSize="32" VerticalAlignment="Center" Margin="0,0,15,0"/>-->
                <TextBlock Text="Hotel Booking System" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White" 
                           VerticalAlignment="Center"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0">
                <TextBlock  Foreground="White" Style="{StaticResource HeaderTextStyle}" VerticalAlignment="Bottom">Hello, </TextBlock>
                <TextBlock Text="{Binding CurrentUser.FullName}" Foreground="White" Style="{StaticResource HeaderTextStyle}" VerticalAlignment="Bottom">
                    
                </TextBlock>
                <Button Command="{Binding LogoutCommand}" Content="Logout" Style="{StaticResource PrimaryButton}" Width="100"
                        Background="#FFFF5722" Margin="5,0,0,0"/>
            </StackPanel>
        </Grid>


        <TabControl Grid.Row="1" Margin="0" FontSize="14" Background="White">

            <TabItem Style="{StaticResource TabItemStyle}" x:Name="SearchHotelsTab" Header="🔍 Search Hotels" Visibility="Visible">
                <Grid Background="#FFF8F9FA">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>


                    

                    <Grid Grid.Row="1" Margin="30,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="320"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <ScrollViewer>
     

                            <StackPanel>
                                <Border Visibility="{Binding ShowSearchHotel}" Grid.Column="0" Style="{StaticResource CardStyle}" Height="850" VerticalAlignment="Top">
                                    <StackPanel Margin="25">
                                        <TextBlock HorizontalAlignment="Center" Text="Hotel Filters" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>
                                        <TextBlock Text="Location" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <ComboBox x:Name="cbbLocation" Style="{StaticResource ModernComboBox}">
                                            <ComboBoxItem>Hà Nội</ComboBoxItem>
                                            <ComboBoxItem>Tuyên Quang</ComboBoxItem>
                                            <ComboBoxItem>Lào Cai</ComboBoxItem>
                                            <ComboBoxItem>Thái Nguyên</ComboBoxItem>
                                            <ComboBoxItem>Phú Thọ</ComboBoxItem>
                                            <ComboBoxItem>Bắc Ninh</ComboBoxItem>
                                            <ComboBoxItem>Hưng Yên</ComboBoxItem>
                                            <ComboBoxItem>Hải Phòng</ComboBoxItem>
                                            <ComboBoxItem>Ninh Bình</ComboBoxItem>
                                            <ComboBoxItem>Quảng Trị</ComboBoxItem>
                                            <ComboBoxItem>Đà Nẵng</ComboBoxItem>
                                            <ComboBoxItem>Quảng Ngãi</ComboBoxItem>
                                            <ComboBoxItem>Gia Lai</ComboBoxItem>
                                            <ComboBoxItem>Khánh Hòa</ComboBoxItem>
                                            <ComboBoxItem>Lâm Đồng</ComboBoxItem>
                                            <ComboBoxItem>Đăk Lăk</ComboBoxItem>
                                            <ComboBoxItem>TP. Hồ Chí Minh</ComboBoxItem>
                                            <ComboBoxItem>TP. Cần Thơ</ComboBoxItem>
                                            <ComboBoxItem>Vĩnh Long</ComboBoxItem>
                                            <ComboBoxItem>Đồng Tháp</ComboBoxItem>
                                            <ComboBoxItem>Cà Mau</ComboBoxItem>
                                            <ComboBoxItem>An Giang</ComboBoxItem>

                                        </ComboBox>
                                        <TextBlock Text="Price Range ($)" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                            <StackPanel>
                                                <Grid Margin="0,0,0,10">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <TextBox x:Name="txtMinPrice" Width="80" Height="30" 
                                     
                                    HorizontalAlignment="Center"/>
                                                    <TextBlock Grid.Column="1" Text="to" 
                                      VerticalAlignment="Center" 
                                      Margin="10,0" 
                                      HorizontalAlignment="Center"/>
                                                    <TextBox x:Name="txtMaxPrice" Grid.Column="2" Width="80" Height="30" 
                                    
                                    HorizontalAlignment="Center"/>
                                                </Grid>
                                            </StackPanel>
                                        </Border>

                                        <TextBlock Text="Star Rating" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                            <StackPanel>
                                                <CheckBox x:Name="cbFiveStar" Content="⭐⭐⭐⭐⭐" Margin="0,5" Foreground="YellowGreen" FontWeight="SemiBold"/>
                                                <CheckBox x:Name="cbFourStar" Content="⭐⭐⭐⭐" Margin="0,5" Foreground="YellowGreen" FontWeight="SemiBold"/>
                                                <CheckBox x:Name="cbThreeStar" Content="⭐⭐⭐" Margin="0,5" Foreground="YellowGreen" FontWeight="SemiBold"/>
                                                <CheckBox x:Name="cbTwoStar" Content="⭐⭐" Margin="0,5" Foreground="YellowGreen" FontWeight="SemiBold"/>
                                                <CheckBox x:Name="cbOneStar" Content="⭐" Margin="0,5" Foreground="YellowGreen" FontWeight="SemiBold"/>

                                            </StackPanel>
                                        </Border>

                                        <TextBlock Text="User Rating" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                            <TextBox x:Name="txtUserRating" Width="80" Height="30" HorizontalAlignment="Left"/>
                                        </Border>

                                        <TextBlock Text="Amenities" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                            <StackPanel>
                                                <CheckBox x:Name="cbFreeWifi" Content="🌐 Free WiFi" Margin="0,5"/>
                                                <CheckBox x:Name="cbSwimmingPool" Content="🏊 Swimming Pool" Margin="0,5"/>
                                                <CheckBox x:Name="cbFreeParking" Content="🚗 Free Parking" Margin="0,5"/>
                                                <CheckBox x:Name="cbRestaurant" Content="🍽️ Restaurant" Margin="0,5"/>
                                                <CheckBox x:Name="cbGym" Content="🏋️ Gym" Margin="0,5"/>
                                            </StackPanel>
                                        </Border>
                                        <Button Content="Clear Filters" Command="{Binding ClearSearchCommand}" Style="{StaticResource SecondaryButton}" Width="120" Margin="0,0,0,20"/>
                                        <Button Command="{Binding SearchHotelsCommand}" Content="Search" Width="120" Margin="0,0,0,20" Style="{StaticResource PrimaryButton}">
                                            <Button.CommandParameter>
                                                <MultiBinding Converter="{StaticResource FilterHotelConverter}">
                                                    <Binding ElementName="cbbLocation" Path="Text"/>
                                                    <Binding ElementName="txtMinPrice" Path="Text"/>
                                                    <Binding ElementName="txtMaxPrice" Path="Text"/>
                                                    <Binding ElementName="cbFiveStar" Path="IsChecked"/>
                                                    <Binding ElementName="cbFourStar" Path="IsChecked"/>
                                                    <Binding ElementName="cbThreeStar" Path="IsChecked"/>
                                                    <Binding ElementName="cbTwoStar" Path="IsChecked"/>
                                                    <Binding ElementName="cbOneStar" Path="IsChecked"/>
                                                    <Binding ElementName="cbFreeWifi" Path="IsChecked"/>
                                                    <Binding ElementName="cbSwimmingPool" Path="IsChecked"/>
                                                    <Binding ElementName="cbFreeParking" Path="IsChecked"/>
                                                    <Binding ElementName="cbRestaurant" Path="IsChecked"/>
                                                    <Binding ElementName="cbGym" Path="IsChecked"/>
                                                    <Binding ElementName="txtUserRating" Path="Text"/>
                                                </MultiBinding>
                                            </Button.CommandParameter>
                                        </Button>
                                    </StackPanel>
                                </Border>

                                <Border Visibility="{Binding ShowSearchRoom}" Grid.Column="0" Style="{StaticResource CardStyle}" Height="850" VerticalAlignment="Top">
                                    <StackPanel Margin="25">
                                        <TextBlock HorizontalAlignment="Center" Text="Room Filters" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                                        <TextBlock Text="Price ($)" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                            <TextBox x:Name="txtRoomPrice" Width="80" Height="30" HorizontalAlignment="Center"/>
                                        </Border>

                                        <TextBlock Text="Capacity" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <TextBox x:Name="txtRoomCapacity" Width="80" Height="30" Margin="0,0,0,20"/>

                                        <TextBlock Text="Check-in Date" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <DatePicker x:Name="dpRoomCheckIn" Width="150" Height="30" Margin="0,0,0,20"/>

                                        <TextBlock Text="Check-out Date" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                        <DatePicker x:Name="dpRoomCheckOut" Width="150" Height="30" Margin="0,0,0,20"/>

                                        <Button Content="Clear Filters" Command="{Binding ClearRoomFiltersCommand}" Style="{StaticResource SecondaryButton}" Width="120" Margin="0,0,0,20"/>
                                        <Button Command="{Binding FilterRoomsCommand}" Content="Search" Width="120" Margin="0,0,0,20" Style="{StaticResource PrimaryButton}">
                                            <Button.CommandParameter>
                                                <MultiBinding Converter="{StaticResource FilterRoomConverter}">
                                                    <Binding ElementName="txtRoomPrice" Path="Text"/>
                                                    <Binding ElementName="txtRoomCapacity" Path="Text"/>
                                                    <Binding ElementName="dpRoomCheckIn" Path="SelectedDate"/>
                                                    <Binding ElementName="dpRoomCheckOut" Path="SelectedDate"/>
                                                </MultiBinding>
                                            </Button.CommandParameter>
                                        </Button>
                                    </StackPanel>
                                </Border>

                            </StackPanel>
                            
                        </ScrollViewer>


                        <Grid Visibility="{Binding ShowRoomList}" Grid.Column="1"  Height="Auto" Margin="20,0,0,0">
                            <Border Grid.Row="2" Background="White" CornerRadius="15" Height="Auto" Margin="0,20,0,0" 
        Visibility="{Binding ShowRoomList}">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>

                                   
                                    <Border Grid.Row="0" Background="#FF2196F3" CornerRadius="15,15,0,0">
                                        <Grid Margin="20,15">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="{Binding CurrentHotel.HotelName, FallbackValue=Test}"
                               FontSize="20" FontWeight="Bold" Foreground="White"/>
                                                <TextBlock Text="Available Rooms"
                               FontSize="14" Foreground="White" Opacity="0.9"/>
                                            </StackPanel>

                                            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="0,0,10,0">
                                                <TextBlock Text="Sort by:" VerticalAlignment="Center" Margin="0,0,10,0" Foreground="White"/>
                                                <ComboBox Height="30" SelectedValue="{Binding RoomSortType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" Style="{StaticResource ModernComboBox}" Width="200" SelectedIndex="0" Background="White">
                                                    <ComboBoxItem Content="Default"/>
                                                    <ComboBoxItem Content="Price: Low to High"/>
                                                    <ComboBoxItem Content="Price: High to Low"/>
                                                    <ComboBoxItem Content="Capacity: Low to High"/>
                                                    <ComboBoxItem Content="Capacity: High to Low"/>
                                                </ComboBox>
                                            </StackPanel>

                                            <Button Grid.Column="2" Content="✖"
                        Style="{StaticResource SecondaryButton}"
                        Width="30" Height="30"
                        Background="Transparent"
                        BorderBrush="White"
                        Foreground="White"
                        Command="{Binding HideRoomsCommand}"/>
                                        </Grid>
                                    </Border>


                                    <ListView Grid.Row="1"
          Margin="4,20,20,20"
          ItemsSource="{Binding FilteredRooms}"
          MaxHeight="400"
          Background="Transparent"
          BorderThickness="0"
           ScrollViewer.HorizontalScrollBarVisibility="Disabled"
          ScrollViewer.VerticalScrollBarVisibility="Auto">

                                       
                                        <ListView.ItemsPanel>
                                            <ItemsPanelTemplate>
                                           
                                                <WrapPanel Orientation="Horizontal" />
                                            </ItemsPanelTemplate>
                                        </ListView.ItemsPanel>

                                      
                                        <ListView.ItemTemplate>
                                            <DataTemplate>
                                                <Border Width="300" Height="340" CornerRadius="20" Margin="12" Padding="0"
        Background="White" Style="{StaticResource RoomCardStyle}">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition Height="170"/>
                                                            <RowDefinition Height="*"/>
                                                        </Grid.RowDefinitions>

                                                        
                                                        <Border Grid.Row="0" CornerRadius="20,20,0,0" ClipToBounds="True">
                                                            <Image Source="{Binding RoomImage, Converter={StaticResource ImageUrlToBitMap}}"
                   Stretch="UniformToFill"/>
                                                        </Border>

                                                       
                                                        <StackPanel Grid.Row="1" Margin="15">
                                                            <TextBlock Text="{Binding RoomNumber, StringFormat=Room {0}}"
                       FontSize="16" FontWeight="Bold" Foreground="#333" Margin="0,0,0,6"/>

                                                            <TextBlock Text="{Binding Capacity, StringFormat=Capacity: {0} people}"
                       FontSize="12" Foreground="#666" Margin="0,0,0,10"/>

                                                            <Grid Margin="0,15,0,0">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                    <ColumnDefinition Width="Auto"/>
                                                                </Grid.ColumnDefinitions>

                                                                <StackPanel Grid.Column="0">
                                                                    <TextBlock Text="Price per night" FontSize="11" Foreground="#999"/>
                                                                    <TextBlock Text="{Binding PricePerNight, StringFormat='${0:F0}'}"
                               FontSize="20" FontWeight="Bold" Foreground="#2E7D32"/>
                                                                </StackPanel>

                                                                <Button Grid.Column="1" Content="Booked Dates"
                                                                        Style="{StaticResource SecondaryButton}"
                                                                        Width="110"
                                                                        Height="35"
                                                                        Margin="0,0,10,0"
                        Command="{Binding DataContext.ShowBookedDatesCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        CommandParameter="{Binding}"/>

                                                                <Button Grid.Column="2" Content="Book"
                                                                        Style="{StaticResource PrimaryButton}"
                                                                        Width="80"
                                                                        Height="35"
                        Command="{Binding DataContext.BookRoomCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                        CommandParameter="{Binding}"/>
                                                            </Grid>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>

                                            </DataTemplate>

                                        </ListView.ItemTemplate>
                                    </ListView>

                                </Grid>
                            </Border>

                        </Grid>
                        
                        <Grid Visibility="{Binding ShowAvailableHotels}" Grid.Column="1" Margin="20,0,0,0">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="*"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <Grid Grid.Row="0" Background="#FF2196F3" Margin="0,0,0,20" >
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock Margin="10" Grid.Column="0" VerticalAlignment="Center" Text="Available Hotels" 
                               FontSize="20" FontWeight="Bold" Foreground="White"/>
                                <StackPanel Height="50" Grid.Column="1" Orientation="Horizontal">
                                    <TextBlock Text="Sort by:" VerticalAlignment="Center" Margin="0,0,10,0" 
                                   Foreground="White"/>
                                    <ComboBox Height="30" SelectedValue="{Binding SortType, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" SelectedValuePath="Content" Style="{StaticResource ModernComboBox}" Width="200" SelectedIndex="0"
                                  Background="White">
                                        <ComboBoxItem Content="Default"/>
                                        <ComboBoxItem Content="Price: Low to High"/>
                                        <ComboBoxItem Content="Price: High to Low"/>
                                        <ComboBoxItem Content="Name: A to Z"/>
                                        <ComboBoxItem Content="Name: Z to A"/>
                                        <ComboBoxItem Content="Hotel Rating: Low to High"/>
                                        <ComboBoxItem Content="Hotel Rating: High to Low"/>
                                        <ComboBoxItem Content="User Rating: Low to High"/>
                                        <ComboBoxItem Content="User Rating: High to Low"/>
                                    </ComboBox>

                                </StackPanel>

                            </Grid>


                            <ListView Grid.Row="1" 
                          ItemsSource="{Binding Hotels}"
                          ScrollViewer.VerticalScrollBarVisibility="Auto"
                          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                          ScrollViewer.CanContentScroll="False"
                          VirtualizingPanel.IsVirtualizing="True"
                          VirtualizingPanel.VirtualizationMode="Recycling"
                          Background="Transparent"
                          BorderThickness="0">
                                <ListView.ItemsPanel>
                                    <ItemsPanelTemplate>
                                        <StackPanel Orientation="Vertical"/>
                                    </ItemsPanelTemplate>
                                </ListView.ItemsPanel>
                                <ListView.ItemContainerStyle>
                                    <Style TargetType="ListViewItem">
                                        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                        <Setter Property="Padding" Value="0"/>
                                        <Setter Property="Margin" Value="0"/>
                                        <Setter Property="Background" Value="Transparent"/>
                                        <Setter Property="BorderThickness" Value="0"/>
                                        <Setter Property="Template">
                                            <Setter.Value>
                                                <ControlTemplate TargetType="ListViewItem">
                                                    <ContentPresenter/>
                                                </ControlTemplate>
                                            </Setter.Value>
                                        </Setter>
                                    </Style>
                                </ListView.ItemContainerStyle>
                                <ListView.ItemTemplate>
                                    <DataTemplate>
                                        <Border Style="{StaticResource RoomCardStyle}" Width="Auto" CornerRadius="15" Background="White" Margin="5,0,0,10"
                                    BorderThickness="1" BorderBrush="#FFE0E0E0">
                                            <Border.Effect>
                                                <DropShadowEffect Color="#FFE0E0E0" Opacity="0.3" BlurRadius="8" ShadowDepth="2"/>
                                            </Border.Effect>
                                            <Grid Height="220">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="280"/>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="200"/>
                                                </Grid.ColumnDefinitions>

                                                <Border Grid.Column="0" CornerRadius="15,0,0,15" ClipToBounds="True">
                                                    <Image Source="{Binding HotelImage, Converter={StaticResource ImageUrlToBitMap}}" 
                                               Stretch="UniformToFill"/>
                                                    <Border.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                            <GradientStop Color="#80000000" Offset="0"/>
                                                            <GradientStop Color="#00000000" Offset="0.7"/>
                                                        </LinearGradientBrush>
                                                    </Border.Background>
                                                </Border>

                                                <StackPanel Grid.Column="1" Margin="20,15" VerticalAlignment="Top">
                                                    <TextBlock Text="{Binding HotelName}" 
                                                   FontSize="20" FontWeight="Bold" Margin="0,0,0,8"/>
                                                    <StackPanel Orientation="Horizontal">
                                                        <TextBlock Foreground="#666" Text="💲 From " FontSize="14"/>
                                                        <TextBlock Foreground="#666" Text="{Binding MinPrice}"/>
                                                        <TextBlock Foreground="#666" Text=" to "/>
                                                        <TextBlock Foreground="#666" Text="{Binding MaxPrice}"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                        <TextBlock Text="📍" FontSize="14"/>
                                                        <TextBlock Foreground="#666" FontSize="14" Margin="5,0,0,0">
                                                            <TextBlock.Text>
                                                                <MultiBinding Converter="{StaticResource LocationConverter}">
                                                                    <Binding Path="City"/>
                                                                    <Binding Path="Address"/>
                                                                </MultiBinding>
                                                            </TextBlock.Text>
                                                        </TextBlock>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                        <TextBlock Text="⭐" Foreground="Gold" FontSize="16"/>
                                                        <TextBlock Text="{Binding Rating}" Margin="5,0,15,0" FontWeight="Bold" FontSize="14"/>
                                                        <TextBlock Text="👤" FontSize="16"/>
                                                        <TextBlock Text="{Binding AverageRating, StringFormat={}{0:F1}}" Margin="5,0,0,0" FontWeight="Bold" FontSize="14"/>
                                                    </StackPanel>

                                                    <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                        <ItemsControl ItemsSource="{Binding Amenities}">
                                                            <ItemsControl.ItemsPanel>
                                                                <ItemsPanelTemplate>
                                                                    <StackPanel Orientation="Horizontal"/>
                                                                </ItemsPanelTemplate>
                                                            </ItemsControl.ItemsPanel>
                                                            <ItemsControl.ItemTemplate>
                                                                <DataTemplate>
                                                                    <Border Background="#FFE3F2FD" CornerRadius="12" Padding="6,3" Margin="0,0,8,0">
                                                                        <TextBlock Text="{Binding AmenityName}" FontSize="11" Foreground="#FF1976D2"/>
                                                                    </Border>
                                                                </DataTemplate>
                                                            </ItemsControl.ItemTemplate>
                                                        </ItemsControl>
                                                    </StackPanel>

                                                    <TextBlock Text="{Binding Description}" 
                                                   HorizontalAlignment="Left"
                                                   TextWrapping="Wrap" Foreground="#666" 
                                                   FontSize="13" MaxHeight="40" Width="800"
                                                   TextTrimming="CharacterEllipsis"/>
                                                </StackPanel>

                                                <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20,15">
                                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                                        <Button Content="Reviews"
                                                                Style="{StaticResource SecondaryButton}"
                                                                Width="90"
                                                                Margin="0,0,10,0"
                                                                Command="{Binding DataContext.ShowHotelReviewsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                CommandParameter="{Binding}"/>
                                                        <Button Content="Details"
                                                                Style="{StaticResource PrimaryButton}"
                                                                Width="80"
                                                                Command="{Binding DataContext.ShowHotelDetailsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                CommandParameter="{Binding HotelID}"/>
                                                    </StackPanel>
                                                </StackPanel>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </ListView.ItemTemplate>
                            </ListView>
                        </Grid>

                        <Button Visibility="{Binding ShowChatButton}" x:Name="btnChat" Width="60" Height="60"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Margin="0,0,30,30"
                    BorderBrush="Transparent"
                    Cursor="Hand"
                    Padding="0" Grid.Column="1"
                    Command="{Binding ShowChatBoxFuncCommand}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Grid>
                                                    <Ellipse Fill="#FF2196F3">
                                                        <Ellipse.Effect>
                                                            <DropShadowEffect Color="Black"
                                                                  Opacity="0.4"
                                                                  BlurRadius="10"/>
                                                        </Ellipse.Effect>
                                                    </Ellipse>
                                                    <Image Source="/Resources/Chatbotlogo.png"
                                               Width="50" Height="50"
                                               Stretch="UniformToFill"
                                               CacheMode="BitmapCache"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Border Visibility="{Binding ShowChatBox}" x:Name="AIChatPanel" Grid.Column="1" Style="{StaticResource CardStyle}" 
                    Height="600" VerticalAlignment="Center" HorizontalAlignment="Right" 
                    Width="350" Margin="0,0,30,0">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

                                <Border Grid.Row="0" Background="#FF2196F3">
                                    <Border.CornerRadius>
                                        <CornerRadius TopLeft="8" TopRight="8" BottomLeft="0" BottomRight="0"/>
                                    </Border.CornerRadius>
                                    <StackPanel Orientation="Horizontal"  Margin="15,12">
                                        <TextBlock Text="🤖 AI Travel Assistant                       " 
                                       FontSize="16" FontWeight="Bold" Foreground="White" 
                                       HorizontalAlignment="Center"/>
                                        <Button Command="{Binding ShowChatButtonFuncCommand}" x:Name="btnCloseChat" Content="✖" BorderThickness="0" Background="Transparent" 
                                    Width="25" Height="25" Foreground="White" 
                                    HorizontalAlignment="Right" Margin="10,0,0,0"/>
                                    </StackPanel>
                                </Border>

                                <ListBox Grid.Row="1" Margin="15" bh:ListBoxExtensions.AutoScroll="True" ItemsSource="{Binding Chats}" ScrollViewer.VerticalScrollBarVisibility="Auto" ScrollViewer.CanContentScroll="False">
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="ListBoxItem">
                                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                                <Setter Property="Focusable" Value="False"/>
                                            <Setter Property="IsEnabled" Value="False"/>
                                        </Style>
                                        </ListBox.ItemContainerStyle>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                   
                                                    <Grid VerticalAlignment="Top" Margin="0,5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Border Grid.Column="0" HorizontalAlignment="Right" Background="#FFF0F8FF"
                    CornerRadius="12" Margin="0,0,8,0" Padding="12">
                                                            <TextBlock Text="{Binding Message}" TextWrapping="Wrap" FontSize="12"
                           TextAlignment="Right" MaxWidth="220"/>
                                                        </Border>

                                                        <Grid Grid.Column="1" Width="32" Height="32">
                                                            <Image Source="{Binding DataContext.CurrentUser.AvatarUrl, RelativeSource={RelativeSource AncestorType=Window}, FallbackValue=/Resources/avatar_default.png}"
                       Stretch="UniformToFill">
                                                                <Image.Clip>
                                                                    <EllipseGeometry Center="16,16" RadiusX="16" RadiusY="16"/>
                                                                </Image.Clip>
                                                            </Image>
                                                            <Ellipse Stroke="#FFE0E0E0" StrokeThickness="3"/>
                                                        </Grid>
                                                    </Grid>

                                                  
                                                    <Grid Margin="0,5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid VerticalAlignment="Top" Grid.Column="0" Width="32" Height="32" Margin="0,0,8,0">
                                                            <Ellipse Fill="#FF2196F3"/>
                                                            <Image Source="/Resources/Chatbotlogo.png" Width="20" Height="20"
                       HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Grid>

                                                        <Border Grid.Column="1" HorizontalAlignment="Left" Background="#FFE8F5E8"
                    CornerRadius="12" Margin="0,0,0,0" Padding="12">
                                                            <Grid>
                                                                <TextBlock x:Name="ResponseText" Text="{Binding Response}" TextWrapping="Wrap" FontSize="12" MaxWidth="220"/>
                                                                <TextBlock x:Name="TypingText" Text="{Binding TypingIndicator}" FontSize="12" MaxWidth="220" Visibility="Collapsed"/>
                                                            </Grid>
                                                        </Border>
                                                    </Grid>
                                                </StackPanel>
                                                <DataTemplate.Triggers>
                                                    <DataTrigger Binding="{Binding IsTyping}" Value="True">
                                                        <Setter TargetName="ResponseText" Property="Visibility" Value="Collapsed"/>
                                                        <Setter TargetName="TypingText" Property="Visibility" Value="Visible"/>
                                                    </DataTrigger>
                                                    <DataTrigger Binding="{Binding IsTyping}" Value="False">
                                                        <Setter TargetName="ResponseText" Property="Visibility" Value="Visible"/>
                                                        <Setter TargetName="TypingText" Property="Visibility" Value="Collapsed"/>
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>
                                            </DataTemplate>

                                        </ListBox.ItemTemplate>
                                </ListBox>

                                <StackPanel Grid.Row="2" Margin="15,10">
                                    <TextBlock Text="{Binding ErrorMessage}" Foreground="Red" Visibility="{Binding ErrorVisibility}" Margin="0,0,0,5"/>
                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="Auto"/>
                                        </Grid.ColumnDefinitions>

                                        <TextBox Grid.Column="0" x:Name="txtChatInput"
                                                Style="{StaticResource ModernTextBox}"
                                                Text="{Binding ChatInput, UpdateSourceTrigger=PropertyChanged}">
                                            <TextBox.InputBindings>
                                                <KeyBinding Key="Enter" Command="{Binding SendCommand}" />
                                            </TextBox.InputBindings>
                                        </TextBox>

                                        <Button Grid.Column="1" Content="➤"
                                               Style="{StaticResource PrimaryButton}"
                                               Command="{Binding SendCommand}"
                                               Width="40" Height="35" Margin="8,0,0,0"
                                               FontWeight="Bold"/>
                                    </Grid>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>


            <TabItem Style="{StaticResource TabItemStyle}" x:Name="MyBookingsTab" Header="📅 My Bookings" Visibility="Visible">
                <ScrollViewer Margin="30,20" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="My Bookings" Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,20"/>

                        <StackPanel Orientation="Horizontal" Margin="0,0,0,20">
                            <TextBlock Text="Filter:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                            <ComboBox Width="150" ItemsSource="{Binding BookingStatusOptions}" SelectedItem="{Binding SelectedBookingStatus}" Style="{StaticResource ModernComboBox}"/>
                        </StackPanel>

                        <ItemsControl x:Name="BookingsItemsControl" ItemsSource="{Binding Bookings}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <Border Style="{StaticResource CardStyle}" Margin="0,0,0,15" Padding="15">
                                        <Grid>
                                            <Grid.RowDefinitions>
                                                <RowDefinition Height="Auto"/>
                                                <RowDefinition Height="*"/>
                                                <RowDefinition Height="Auto"/>
                                            </Grid.RowDefinitions>

                                            
                                            <Grid Grid.Row="0" Margin="0,0,0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>

                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding HotelID, Converter={StaticResource HotelIdToHotelNameConverter}}" 
                               FontSize="20" FontWeight="Bold" Foreground="#333"/>
                                                    <TextBlock Text="{Binding BookingID, StringFormat='Booking #{0}'}" 
                               FontSize="12" Foreground="#999"/>
                                                </StackPanel>

                                                
                                                <Border Grid.Column="1" Background="#E3F2FD" Padding="8,4" CornerRadius="10" VerticalAlignment="Center">
                                                    <TextBlock Text="{Binding Status}" 
                               FontWeight="SemiBold" Foreground="#2196F3"/>
                                                </Border>
                                            </Grid>

                                         
                                            <Grid Grid.Row="1" Margin="0,10">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="2*"/>
                                                    <ColumnDefinition Width="2*"/>
                                                </Grid.ColumnDefinitions>

                                                
                                                <StackPanel Grid.Column="0" Margin="0,0,10,0">
                                                    <TextBlock Text="Guest" FontSize="12" Foreground="#666"/>
                                                    <TextBlock Text="{Binding GuestName, FallbackValue='Guest'}"
                               FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>

                                                    <TextBlock Text="Room" FontSize="12" Foreground="#666"/>
                                                    <TextBlock Text="{Binding RoomID, Converter={StaticResource RoomIdToRoomNumberConverter}, StringFormat='Room {0}'}" 
                               FontSize="14" FontWeight="Bold"/>
                                                </StackPanel>

                                                
                                                <StackPanel Grid.Column="1">
                                                    <TextBlock Text="Check-in / Check-out" FontSize="12" Foreground="#666"/>
                                                    <TextBlock>
                        <Run Text="{Binding CheckInDate, StringFormat='{}{0:MMM dd}'}"/>
                        <Run Text=" → "/>
                        <Run Text="{Binding CheckOutDate, StringFormat='{}{0:MMM dd}'}"/>
                                                    </TextBlock>

                                                    <TextBlock Text="Duration" FontSize="12" Foreground="#666" Margin="0,8,0,0"/>
                                                    <TextBlock x:Name="tblNights" FontWeight="Bold" Foreground="#4CAF50">
                                                        <TextBlock.Text>
                                                            <MultiBinding Converter="{StaticResource NightsCalculatorConverter}">
                                                                <Binding Path="CheckInDate"/>
                                                                <Binding Path="CheckOutDate"/>
                                                            </MultiBinding>
                                                        </TextBlock.Text>
                                                    </TextBlock>

                                                    <TextBlock Text="Total" FontSize="12" Foreground="#666" Margin="0,8,0,0"/>
                                                    <TextBlock FontWeight="Bold" FontSize="16" Foreground="#4CAF50">
                                                        <TextBlock.Text>
                                                            <MultiBinding Converter="{StaticResource TotalAmountCalculatorConverter}">
                                                                <Binding Path="RoomID"/>
                                                                <Binding ElementName="tblNights" Path="Text"/>
                                                                
                                                            </MultiBinding>
                                                        </TextBlock.Text>
                                                    </TextBlock>
                                                </StackPanel>
                                            </Grid>

                                            <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0" >
                                                <Button Content="Cancel" Width="100" Style="{StaticResource SecondaryButton}"
                        Command="{Binding DataContext.CancelBookingCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" CommandParameter="{Binding}"/>
                                                <Button Content="Review" Width="100" Style="{StaticResource SecondaryButton}"
                        Command="{Binding DataContext.ReviewBookingCommand, RelativeSource={RelativeSource AncestorType=Window}}" CommandParameter="{Binding}"/>
                                                <Button Content="Edit" Width="120" Style="{StaticResource SecondaryButton}"
                        Command="{Binding DataContext.EditBookingCommand, RelativeSource={RelativeSource AncestorType={x:Type Window}}}" CommandParameter="{Binding}"/>
                                            </StackPanel>
                                        </Grid>
                                    </Border>
                                </DataTemplate>

                            </ItemsControl.ItemTemplate>
                        </ItemsControl>


                        <Border Style="{StaticResource CardStyle}" Visibility="{Binding HasBookings}">
                            <StackPanel HorizontalAlignment="Center" Margin="20,40">
                                <TextBlock Text="📅" FontSize="48" HorizontalAlignment="Center" Margin="0,0,0,20"/>
                                <TextBlock Text="No bookings found" FontSize="20" FontWeight="SemiBold" HorizontalAlignment="Center" Margin="0,0,0,10"/>
                                <TextBlock Text="Your upcoming and past bookings will appear here." 
                              FontSize="14" Foreground="#FF666666" HorizontalAlignment="Center" TextWrapping="Wrap"/>
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>


            <TabItem Style="{StaticResource TabItemStyle}" Header="👤 Profile" Visibility="Visible">
                <ScrollViewer Margin="30,20" VerticalScrollBarVisibility="Auto">
                    <Grid MaxWidth="1000">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="2*"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>


                        <StackPanel Grid.Column="0" Margin="0,0,30,0">


                            <Border Style="{StaticResource CardStyle}" Margin="0,0,0,20">
                                <StackPanel Margin="25">
                                    <TextBlock Text="Personal Information" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>


                                        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="User ID" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="{Binding CurrentUser.UserID}" 
                                         Style="{StaticResource ModernTextBox}"
                                         IsReadOnly="True"
                                                     BorderThickness="0"
                                         Background="#FFF5F5F5"
                                         Foreground="#FF666666"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="Full Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="{Binding CurrentUser.FullName}" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>


                                        <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="Email Address" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox IsReadOnly="True" Text="{Binding CurrentUser.Email}" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,0,10,15">
                                            <TextBlock Text="Phone Number" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="{Binding CurrentUser.Phone}" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>


                                        <StackPanel Grid.Row="3" Grid.Column="1" Margin="10,0,0,15">
                                            <TextBlock Text="Gender" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <ComboBox SelectedValue="{Binding CurrentUser.Gender, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
          SelectedValuePath="Content" Style="{StaticResource ModernComboBox}">
                                                <ComboBoxItem Content="Male" />
                                                <ComboBoxItem Content="Female" />
                                                <ComboBoxItem Content="Other" />
                                                
                                            </ComboBox>
                                        </StackPanel>


                                        <StackPanel Grid.Row="4" Grid.Column="0" Margin="0,0,10,15">
                                            <TextBlock Text="Date of Birth" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <DatePicker SelectedDate="{Binding CurrentUser.DateOfBirth}" Style="{StaticResource ModernDatePicker}"/>
                                        </StackPanel>


                                        <StackPanel Grid.Row="4" Grid.Column="1" Margin="10,0,0,15">
                                            <TextBlock Text="Role" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="{Binding CurrentUser.Role}" 
                                         Style="{StaticResource ModernTextBox}"
                                         IsReadOnly="True"
                                         Background="#FFF5F5F5"
                                         Foreground="#FF666666"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                        <Button Command="{Binding UpdateInfoCommand}" Content="Update Profile" Width="150" Style="{StaticResource PrimaryButton}" Margin="0,0,10,0"/>
                                        <Button Command="{Binding RegisterCommand}" Content="Register Hotel Admin" Background="#FFFF9800" 
                                    Style="{StaticResource PrimaryButton}" Width="200"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>


                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Margin="25">
                                    <TextBlock Text="Change Password" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>
                                    <TextBlock Text="{Binding NotificationMessage}" Foreground="Red" FontSize="14" HorizontalAlignment="Center" Margin="0,0,0,10"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>


                                        <StackPanel Grid.Row="0" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="Current Password" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <PasswordBox x:Name="txtCurrentPassword" 
                                           Style="{StaticResource ModernPasswordBox}"
                                           />
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="0" Margin="0,0,10,15">
                                            <TextBlock Text="New Password" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <PasswordBox x:Name="txtNewPassword" 
                                           Style="{StaticResource ModernPasswordBox}"
                                           />
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="1" Margin="10,0,0,15">
                                            <TextBlock Text="Confirm New Password" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <PasswordBox x:Name="txtConfirmPassword" 
                                           Style="{StaticResource ModernPasswordBox}"
                                           />
                                        </StackPanel>


                                        <Border Grid.Row="2" Grid.ColumnSpan="2" Background="#FFF3E5F5" CornerRadius="8" Padding="12" Margin="0,0,0,15">
                                            <StackPanel>
                                                <TextBlock Text="Password Requirements:" FontWeight="SemiBold" FontSize="12" Margin="0,0,0,5"/>
                                                <TextBlock Text="• At least 8 characters long" FontSize="11" Margin="0,2"/>
                                                <TextBlock Text="• Contains uppercase and lowercase letters" FontSize="11" Margin="0,2"/>
                                                <TextBlock Text="• Contains at least one number" FontSize="11" Margin="0,2"/>
                                                <TextBlock Text="• Contains at least one special character" FontSize="11" Margin="0,2"/>
                                            </StackPanel>
                                        </Border>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                        <Button Command="{Binding ChangePasswordCommand}" Content="Change Password" Width="150" Style="{StaticResource PrimaryButton}"
                                    Background="#FFFF5722" Margin="0,0,10,0"/>
                                        <Button Content="Cancel" Width="100" Style="{StaticResource SecondaryButton}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>


                        <StackPanel Grid.Column="1">
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Margin="25" HorizontalAlignment="Center">

                                    <Grid Width="100" Height="100">
                                        <Image Source="{Binding CurrentUser.AvatarUrl, FallbackValue=\Resources\avatar_default.png}"
           Stretch="UniformToFill">
                                            <Image.Clip>
                                                <EllipseGeometry Center="50,50" RadiusX="50" RadiusY="50"/>
                                            </Image.Clip>
                                        </Image>
                                        <Ellipse Stroke="#FFE0E0E0" StrokeThickness="3"/>
                                    </Grid>


                                    <TextBlock Text="{Binding CurrentUser.FullName}" FontSize="18" FontWeight="Bold" 
                                   HorizontalAlignment="Center" Margin="0,0,0,5"/>
                                    <Border 
                                CornerRadius="12" Padding="8,4" HorizontalAlignment="Center" Margin="0,0,0,20">
                                        <TextBlock Text="{Binding CurrentUser.Role}" FontSize="12" Foreground="White" 
                                       FontWeight="SemiBold" HorizontalAlignment="Center"/>
                                    </Border>


                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="{Binding TotalBookings, FallbackValue=0}" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Bookings" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>


                                        <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="{Binding TotalSpent, StringFormat='${0:F0}',FallbackValue=0}" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Spent" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>


                                        <Border Grid.Row="2" Grid.ColumnSpan="2" Background="#FFFFF3E0" CornerRadius="8" 
                                    Padding="10,8" Margin="0,15,0,0" HorizontalAlignment="Stretch">
                                            <StackPanel HorizontalAlignment="Center">
                                                <TextBlock Text="🏆 Membership Level" FontSize="10" Foreground="#FF666666" 
                                               HorizontalAlignment="Center"/>
                                                <TextBlock Text="{Binding MembershipLevel}" FontSize="14" FontWeight="Bold" 
                                               Foreground="#FFFF9800" HorizontalAlignment="Center"/>
                                            </StackPanel>
                                        </Border>
                                    </Grid>

                                    <StackPanel Margin="0,20,0,0">
                                        <Button Content="Upload Avatar" Width="150" Height="35"
                                                Command="{Binding UploadImageCommand}"
                                    Style="{StaticResource SecondaryButton}" Margin="0,0,0,8"/>

                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>


                        <Grid  Visibility="{Binding ShowRegisterForm}"  HorizontalAlignment="Left" VerticalAlignment="Top" x:Name="HotelAdminPopup" Background="White"  Margin="141,10,0,0">
                            <Border Background="White" CornerRadius="15" MaxWidth="600" MaxHeight="700" 
HorizontalAlignment="Center" VerticalAlignment="Center" 
Margin="50" Padding="0">
                                <Border.Effect>
                                    <DropShadowEffect Color="Black" Opacity="0.3" BlurRadius="15" ShadowDepth="5"/>
                                </Border.Effect>

                                <Grid>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="Auto"/>
                                        <RowDefinition Height="*"/>
                                        <RowDefinition Height="Auto"/>
                                    </Grid.RowDefinitions>


                                    <Border Grid.Row="0" Background="#FFFF9800" CornerRadius="15,15,0,0" Padding="25,20">
                                        <Grid>
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                            </Grid.ColumnDefinitions>

                                            <StackPanel Grid.Column="0">
                                                <TextBlock Text="🏪 Become Hotel Admin" FontSize="22" FontWeight="Bold" 
                       Foreground="White"/>
                                                <TextBlock Text="Register your hotel and start managing bookings" 
                       FontSize="12" Foreground="White" Opacity="0.9" Margin="0,3,0,0"/>
                                            </StackPanel>

                                            <Button Command="{Binding CloseFormCommand}" Grid.Column="1" Content="✖" Width="30" Height="30" 
                Background="Transparent" BorderBrush="White" BorderThickness="1"
                Foreground="White" 
                />
                                        </Grid>
                                    </Border>


                                    <ScrollViewer Grid.Row="1" Margin="25" VerticalScrollBarVisibility="Auto">
                                        <StackPanel>

                                            <TextBlock HorizontalAlignment="Center" Text="Hotel Information" FontSize="16" FontWeight="Bold" 
                   Margin="0,0,0,15"/>

                                            <Grid Margin="0,0,0,20">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                      <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>


                                                <StackPanel Grid.Row="0" Grid.ColumnSpan="2">
                                                    <TextBlock Text="Hotel Name *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                                    <TextBox Text="{Binding RequestHotelName, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ModernTextBox}"
                         />
                                                </StackPanel>


                                                <StackPanel Grid.Row="3" Grid.Column="1" Margin="10,0,0,15">
                                                    <TextBlock Text="Star Rating *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                                    <ComboBox x:Name="cmbStarRating" Style="{StaticResource ModernComboBox}">
                                                        <ComboBoxItem Content="⭐ 1 Star"/>
                                                        <ComboBoxItem Content="⭐⭐ 2 Stars"/>
                                                        <ComboBoxItem Content="⭐⭐⭐ 3 Stars"/>
                                                        <ComboBoxItem Content="⭐⭐⭐⭐ 4 Stars"/>
                                                        <ComboBoxItem Content="⭐⭐⭐⭐⭐ 5 Stars"/>
                                                    </ComboBox>
                                                </StackPanel>


                                                <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                                    <TextBlock Text="Hotel Address *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                                    <TextBox Text="{Binding RequestHotelAddress, UpdateSourceTrigger=PropertyChanged}" Style="{StaticResource ModernTextBox}"
                        />
                                                </StackPanel>


                                                <StackPanel Grid.Row="3" Grid.Column="0" Margin="0,0,10,15">
                                                    <TextBlock Text="City *" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                                    <ComboBox x:Name="cbbCity" Style="{StaticResource ModernComboBox}">
                                                        <ComboBoxItem>Hà Nội</ComboBoxItem>
                                                        <ComboBoxItem>Tuyên Quang</ComboBoxItem>
                                                        <ComboBoxItem>Lào Cai</ComboBoxItem>
                                                        <ComboBoxItem>Thái Nguyên</ComboBoxItem>
                                                        <ComboBoxItem>Phú Thọ</ComboBoxItem>
                                                        <ComboBoxItem>Bắc Ninh</ComboBoxItem>
                                                        <ComboBoxItem>Hưng Yên</ComboBoxItem>
                                                        <ComboBoxItem>Hải Phòng</ComboBoxItem>
                                                        <ComboBoxItem>Ninh Bình</ComboBoxItem>
                                                        <ComboBoxItem>Quảng Trị</ComboBoxItem>
                                                        <ComboBoxItem>Đà Nẵng</ComboBoxItem>
                                                        <ComboBoxItem>Quảng Ngãi</ComboBoxItem>
                                                        <ComboBoxItem>Gia Lai</ComboBoxItem>
                                                        <ComboBoxItem>Khánh Hòa</ComboBoxItem>
                                                        <ComboBoxItem>Lâm Đồng</ComboBoxItem>
                                                        <ComboBoxItem>Đăk Lăk</ComboBoxItem>
                                                        <ComboBoxItem>TP. Hồ Chí Minh</ComboBoxItem>
                                                        <ComboBoxItem>TP. Cần Thơ</ComboBoxItem>
                                                        <ComboBoxItem>Vĩnh Long</ComboBoxItem>
                                                        <ComboBoxItem>Đồng Tháp</ComboBoxItem>
                                                        <ComboBoxItem>Cà Mau</ComboBoxItem>
                                                        <ComboBoxItem>An Giang</ComboBoxItem>

                                                    </ComboBox>
                                                </StackPanel>


                                                <StackPanel Grid.Row="4" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                                    <TextBlock Text="Hotel Description" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                                    <TextBox x:Name="txtHotelDescription" Style="{StaticResource ModernTextBox}"
                         Height="80" TextWrapping="Wrap" AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"/>
                                                </StackPanel>
                                            </Grid>



                                            <Grid Margin="0,0,0,20">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="*"/>
                                                </Grid.ColumnDefinitions>
                                                <Grid.RowDefinitions>
                                                    <RowDefinition Height="Auto"/>
                                                    <RowDefinition Height="Auto"/>
                                                </Grid.RowDefinitions>

                                            </Grid>


                                            <TextBlock HorizontalAlignment="Center" Text="Hotel Amenities" FontSize="16" FontWeight="Bold" 
                   Margin="0,10,0,15"/>

                                            <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15" Margin="0,0,0,20">
                                                <Grid>
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="*"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                        <RowDefinition Height="Auto"/>
                                                    </Grid.RowDefinitions>

                                                    <CheckBox Style="{StaticResource ModernCheckBox}" Grid.Row="0" Grid.Column="0" Content="🌐 Free WiFi" Margin="0,3"/>
                                                    <CheckBox Style="{StaticResource ModernCheckBox}" Grid.Row="0" Grid.Column="1" Content="🏊 Swimming Pool" Margin="0,3"/>
                                                    <CheckBox Style="{StaticResource ModernCheckBox}" Grid.Row="1" Grid.Column="0" Content="🚗 Free Parking" Margin="0,3"/>
                                                    <CheckBox Style="{StaticResource ModernCheckBox}" Grid.Row="1" Grid.Column="1" Content="💪 Gym" Margin="0,3"/>
                                                    <CheckBox Style="{StaticResource ModernCheckBox}" Grid.Row="2" Grid.Column="0" Content="🍽️ Restaurant" Margin="0,3"/>

                                                </Grid>
                                            </Border>



                                        </StackPanel>
                                    </ScrollViewer>


                                    <Border Grid.Row="2" BorderThickness="0,1,0,0" BorderBrush="#FFE0E0E0" Padding="25,15">
                                        <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                            <Button Command="{Binding CloseFormCommand}" Content="Cancel" Width="100" Height="40" 
                Style="{StaticResource SecondaryButton}" 
                Margin="0,0,10,0"/>
                                            <Button Command="{Binding SubmitRequestCommand}" Content="Submit" Width="150" Height="40" 
                Style="{StaticResource PrimaryButton}" Background="#FFFF9800"
                />
                                        </StackPanel>
                                    </Border>
                                </Grid>
                            </Border>
                        </Grid>

                    </Grid>



                </ScrollViewer>

            </TabItem>

        </TabControl>
    </Grid>
</Window>
