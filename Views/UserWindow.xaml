<Window x:Class="Hotel_Booking_System.Views.UserWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Hotel_Booking_System.Views"
        mc:Ignorable="d"
        xmlns:bh="clr-namespace:Hotel_Booking_System.Behaviors"
        Title="Hotel Booking System" Height="900" Width="1200"
        WindowStartupLocation="CenterScreen" ResizeMode="CanResize">

    <Window.WindowState>Maximized</Window.WindowState>

    
    <Grid Background="#FFF8F9FA">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

      
        <Grid Grid.Row="0" Background="#FF1976D2" Height="80">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0">
                <TextBlock Text="🏨" FontSize="32" VerticalAlignment="Center" Margin="0,0,15,0"/>
                <TextBlock Text="Multi-Hotel Booking System" 
                           FontSize="24" FontWeight="Bold" 
                           Foreground="White" 
                           VerticalAlignment="Center"/>
            </StackPanel>

            <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" Margin="30,0">
                <TextBlock Foreground="White" Style="{StaticResource HeaderTextStyle}" VerticalAlignment="Bottom">
                    Xin Chào, ...
                </TextBlock>
                <Button Content="Logout" Style="{StaticResource PrimaryButton}" Width="100"
                        Background="#FFFF5722" Margin="5,0,0,0"/>
            </StackPanel>
        </Grid>

     
        <TabControl Grid.Row="1" Margin="0" FontSize="14" Background="White">
            
     
            <TabItem Style="{StaticResource TabItemStyle}" x:Name="SearchHotelsTab" Header="🔍 Search Hotels" Visibility="Visible">
                <Grid Background="#FFF8F9FA">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <Border Grid.Row="0" Background="White" BorderThickness="0,0,0,1" BorderBrush="#FFE0E0E0" Padding="30,25">
                        <StackPanel>
                            <TextBlock Text="Discover Your Perfect Stay" 
                                       Style="{StaticResource HeaderTextStyle}" 
                                       FontSize="28" 
                                       Margin="0,0,0,20"/>
                            
            
                            <Border Background="#FFF8F9FA" CornerRadius="15" Padding="25,20">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="2.5*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                    <Border Grid.Column="0" Background="White" CornerRadius="10" Margin="0,0,10,0">
                                        <StackPanel Margin="15,12">
                                            <TextBlock Text="📍 Destination" FontWeight="SemiBold" FontSize="12" Foreground="#FF666666" Margin="0,0,0,5"/>
                                            <TextBox x:Name="txtLocation" 
                                                     Style="{StaticResource ModernTextBox}"
                                                     />
                                        </StackPanel>
                                    </Border>

                                    <Border Grid.Column="1" Background="White" CornerRadius="10" Margin="0,0,10,0">
                                        <StackPanel Margin="15,12">
                                            <TextBlock Text="📅 Check-in" FontSize="12" FontWeight="SemiBold"  Foreground="#FF666666" Margin="0,0,0,5"/>
                                            <DatePicker Style="{StaticResource ModernDatePicker}" 
                                                       x:Name="CheckInDate"
                                                       />
                                        </StackPanel>
                                    </Border>

                                    <Border Grid.Column="2" Background="White" CornerRadius="10" Margin="0,0,10,0">
                                        <StackPanel Margin="15,12">
                                            <TextBlock Text="📅 Check-out" FontWeight="SemiBold" FontSize="12" Foreground="#FF666666" Margin="0,0,0,5"/>
                                            <DatePicker Style="{StaticResource ModernDatePicker}" 
                                                       x:Name="CheckOutDate"
                                                       BorderThickness="0"
                                                       Background="Transparent"/>
                                        </StackPanel>
                                    </Border>

                                    <Border Grid.Column="3" Background="White" CornerRadius="10" Margin="0,0,10,0">
                                        <StackPanel Margin="15,12">
                                            <TextBlock Text="👥 Guests" FontWeight="SemiBold" FontSize="12" Foreground="#FF666666" Margin="0,0,0,5"/>
                                            <ComboBox Style="{StaticResource ModernComboBox}" 
                                                      x:Name="GuestsComboBox"
                                                      BorderThickness="0"
                                                      Background="Transparent">
                                                <ComboBoxItem Content="1 Guest"/>
                                                <ComboBoxItem Content="2 Guests" IsSelected="True"/>
                                                <ComboBoxItem Content="3 Guests"/>
                                                <ComboBoxItem Content="4+ Guests"/>
                                            </ComboBox>
                                        </StackPanel>
                                    </Border>

                                    <Button Grid.Column="4" 
                                            Style="{StaticResource PrimaryButton}" 
                                            Content="🔍 Search Hotels" 
                                            VerticalAlignment="Center"
                                            Width="140"
                                            
                                            
                                            FontWeight="SemiBold"/>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Border>

                    <Grid Grid.Row="1" Margin="30,20">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="320"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Border Grid.Column="0" Style="{StaticResource CardStyle}" Height="600" VerticalAlignment="Top">
                            <StackPanel Margin="25">
                                <TextBlock Text="🔧 Advanced Filters" FontSize="18" FontWeight="Bold" Margin="0,0,0,20"/>

                                <TextBlock Text="💰 Price Range" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                    <StackPanel>
                                        <Grid Margin="0,0,0,10">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*"/>
                                                <ColumnDefinition Width="Auto"/>
                                                <ColumnDefinition Width="*"/>
                                            </Grid.ColumnDefinitions>
                                            <TextBox Text="$50" Width="80" Height="30" 
                                                     Style="{StaticResource ModernTextBox}" 
                                                     HorizontalAlignment="Left"/>
                                            <TextBlock Grid.Column="1" Text="to" 
                                                       VerticalAlignment="Center" 
                                                       Margin="10,0" 
                                                       HorizontalAlignment="Center"/>
                                            <TextBox Grid.Column="2" Text="$300" Width="80" Height="30" 
                                                     Style="{StaticResource ModernTextBox}" 
                                                     HorizontalAlignment="Right"/>
                                        </Grid>
                                        <Slider Minimum="0" Maximum="500" Value="150" 
                                                TickFrequency="50" 
                                                IsSnapToTickEnabled="True"/>
                                    </StackPanel>
                                </Border>

                                <TextBlock Text="⭐ Star Rating" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                    <StackPanel>
                                        <CheckBox Content="⭐⭐⭐⭐⭐ 5 Stars" Margin="0,5" FontWeight="SemiBold"/>
                                        <CheckBox Content="⭐⭐⭐⭐ 4+ Stars" Margin="0,5" FontWeight="SemiBold" IsChecked="True"/>
                                        <CheckBox Content="⭐⭐⭐ 3+ Stars" Margin="0,5" FontWeight="SemiBold"/>
                                        <CheckBox Content="⭐⭐ 2+ Stars" Margin="0,5" FontWeight="SemiBold"/>
                                    </StackPanel>
                                </Border>

                                <TextBlock Text="🏷️ Amenities" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                    <StackPanel>
                                        <CheckBox Content="🌐 Free WiFi" Margin="0,5"/>
                                        <CheckBox Content="🏊 Swimming Pool" Margin="0,5"/>
                                        <CheckBox Content="🚗 Free Parking" Margin="0,5"/>
                                        <CheckBox Content="💪 Fitness Center" Margin="0,5"/>
                                        <CheckBox Content="🍽️ Restaurant" Margin="0,5"/>
                                        <CheckBox Content="🐕 Pet Friendly" Margin="0,5"/>
                                        <CheckBox Content="🛁 Spa" Margin="0,5"/>
                                        <CheckBox Content="🏋️ Gym" Margin="0,5"/>
                                    </StackPanel>
                                </Border>

                                <TextBlock Text="🏢 Property Type" FontWeight="SemiBold" Margin="0,0,0,10"/>
                                <Border Background="#FFF8F9FA" CornerRadius="8" Padding="15,12" Margin="0,0,0,20">
                                    <StackPanel>
                                        <CheckBox Content="🏨 Hotel" Margin="0,5" IsChecked="True"/>
                                        <CheckBox Content="🏡 Resort" Margin="0,5"/>
                                        <CheckBox Content="🏰 Boutique" Margin="0,5"/>
                                        <CheckBox Content="🏠 Guesthouse" Margin="0,5"/>
                                        <CheckBox Content="🏖️ Beach Resort" Margin="0,5"/>
                                    </StackPanel>
                                </Border>


                                <Button Content="🗑️ Clear All Filters" 
                                        Style="{StaticResource SecondaryButton}"
                                        Height="40"
                                        Background="#FFFF5722"
                                        Foreground="White"/>
                            </StackPanel>
                        </Border>


                        <ScrollViewer PanningMode="VerticalOnly" CanContentScroll="True" Grid.Column="1" Margin="20,0,0,0" VerticalScrollBarVisibility="Auto">
                            <StackPanel>

                                <Grid Background="DeepSkyBlue" Margin="0,0,0,20">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>
                                    <TextBlock VerticalAlignment="Center" Text="🏨 Available Hotels" FontSize="20" FontWeight="Bold"/>
                                    <StackPanel Background="DeepSkyBlue" Grid.Column="1" Orientation="Horizontal">
                                        <TextBlock Text="Sort by:" VerticalAlignment="Center" Margin="0,0,10,0"/>
                                        <ComboBox Style="{StaticResource ModernComboBox}"  Width="200" SelectedIndex="0">
                                            <ComboBoxItem Content="Recommended"/>
                                            <ComboBoxItem Content="Price: Low to High"/>
                                            <ComboBoxItem Content="Price: High to Low"/>
                                            <ComboBoxItem Content="Rating"/>
                                            <ComboBoxItem Content="Distance"/>
                                        </ComboBox>
                                    </StackPanel>
                                </Grid>

                                <ScrollViewer VerticalScrollBarVisibility="Auto">
                                    <ItemsControl ItemsSource="{Binding Hotels}">
                                        <ItemsControl.ItemsPanel>
                                            <ItemsPanelTemplate>
                                                <StackPanel Orientation="Vertical"/>
                                            </ItemsPanelTemplate>
                                        </ItemsControl.ItemsPanel>

                                        <ItemsControl.ItemTemplate>
                                            <DataTemplate>
                                                <Border CornerRadius="15" Background="White" Margin="0,0,0,20">
                                                    <Grid Height="220">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="280"/>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="200"/>
                                                        </Grid.ColumnDefinitions>

                                                        <!-- Hotel Image -->
                                                        <Border CornerRadius="15,0,0,15" ClipToBounds="True">
                                                            <Image Source="{Binding HotelImage, Converter={StaticResource ImageUrlToBitMap}}" 
                                   Stretch="Fill"/>
                                                            <Border.Background>
                                                                <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                                    <GradientStop Color="#80000000" Offset="0"/>
                                                                    <GradientStop Color="#00000000" Offset="0.7"/>
                                                                </LinearGradientBrush>
                                                            </Border.Background>
                                                        </Border>

                                                        <!-- Hotel Info -->
                                                        <StackPanel Grid.Column="1" Margin="20,15">
                                                            <TextBlock Text="{Binding HotelName}" 
                                       FontSize="20" FontWeight="Bold" Margin="0,0,0,8"/>

                                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                                                                <TextBlock Text="📍" FontSize="14"/>
                                                                <TextBlock Foreground="#666" FontSize="14" Margin="5,0,0,0">
                                                                    <TextBlock.Text>
                                                                        <MultiBinding Converter="{StaticResource LocationConverter}">
                                                                            <Binding Path="City"/>
                                                                            <Binding Path="Address"/>
                                                                        </MultiBinding>
                                                                    </TextBlock.Text>
                                                                </TextBlock>
                                                            </StackPanel>

                                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                                <TextBlock Text="⭐" Foreground="Gold" FontSize="16"/>
                                                                <TextBlock Text="{Binding Rating}" Margin="5,0,0,0" FontWeight="Bold" FontSize="14"/>
                                                                <TextBlock Text=" (234 reviews)" Foreground="#666" Margin="5,0,0,0" FontSize="12"/>
                                                            </StackPanel>

                                                            <!-- Facilities -->
                                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,12">
                                                                <Border Background="#FFE3F2FD" CornerRadius="12" Padding="6,3" Margin="0,0,8,0">
                                                                    <TextBlock Text="🌐 WiFi" FontSize="11" Foreground="#FF1976D2"/>
                                                                </Border>
                                                                <Border Background="#FFE8F5E8" CornerRadius="12" Padding="6,3" Margin="0,0,8,0">
                                                                    <TextBlock Text="🏊 Pool" FontSize="11" Foreground="#FF4CAF50"/>
                                                                </Border>
                                                                <Border Background="#FFFFF3E0" CornerRadius="12" Padding="6,3" Margin="0,0,8,0">
                                                                    <TextBlock Text="🚗 Parking" FontSize="11" Foreground="#FFFF9800"/>
                                                                </Border>
                                                                <Border Background="#FFF3E5F5" CornerRadius="12" Padding="6,3">
                                                                    <TextBlock Text="💪 Gym" FontSize="11" Foreground="#FF9C27B0"/>
                                                                </Border>
                                                            </StackPanel>

                                                            <TextBlock Text="{Binding Description}" 
                                                                       HorizontalAlignment="Left"
                                       TextWrapping="Wrap" Foreground="#666" 
                                       FontSize="13" MaxHeight="40" Width="800"
                                       TextTrimming="CharacterEllipsis"/>
                                                        </StackPanel>

                                                        <!-- Action -->
                                                        <StackPanel Grid.Column="2" HorizontalAlignment="Right" VerticalAlignment="Center" Margin="20,15">
                                                            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                                                <Button Content="📖 Details" 
                                        Style="{StaticResource PrimaryButton}"
                                        Width="80" 
                                        Command="{Binding ShowHotelDetailsCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                        CommandParameter="{Binding}"/>
                                                            </StackPanel>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </DataTemplate>
                                        </ItemsControl.ItemTemplate>
                                    </ItemsControl>
                                </ScrollViewer>


                                <Border Background="White" CornerRadius="15" Margin="0,20,0,0" 
                                        Visibility="{Binding ShowRooms, Converter={StaticResource BooleanToVisibilityConverter}}">
                                    <Grid>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="*"/>
                                        </Grid.RowDefinitions>

             
                                        <Border Grid.Row="0" Background="#FF2196F3" CornerRadius="15,15,0,0">
                                            <Grid Margin="20,15">
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*"/>
                                                    <ColumnDefinition Width="Auto"/>
                                                </Grid.ColumnDefinitions>
                                                
                                                <StackPanel Grid.Column="0">
                                                    <TextBlock Text="{Binding SelectedHotel.HotelName}" 
                                                               FontSize="20" FontWeight="Bold" Foreground="White"/>
                                                    <TextBlock Text="Available Rooms" 
                                                               FontSize="14" Foreground="White" Opacity="0.9"/>
                                                </StackPanel>
                                                
                                                <Button Grid.Column="1" Content="✖" 
                                                        Style="{StaticResource SecondaryButton}"
                                                        Width="30" Height="30"
                                                        Background="Transparent"
                                                        BorderBrush="White"
                                                        Foreground="White"
                                                        Command="{Binding HideRoomsCommand}"/>
                                            </Grid>
                                        </Border>

               
                                        <ScrollViewer Grid.Row="1" Margin="20" VerticalScrollBarVisibility="Auto">
                                            <ItemsControl ItemsSource="{Binding FilteredRooms}">
                                                <ItemsControl.ItemsPanel>
                                                    <ItemsPanelTemplate>
                                                        <WrapPanel/>
                                                    </ItemsPanelTemplate>
                                                </ItemsControl.ItemsPanel>
                                                <ItemsControl.ItemTemplate>
                                                    <DataTemplate>
                                                        <Border Width="300" Height="280" Background="#FFF8F9FA" 
                                                                CornerRadius="12" Margin="10" Padding="15">
                                                            <Grid>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="150"/>
                                                                    <RowDefinition Height="*"/>
                                                                </Grid.RowDefinitions>

                                                       
                                                                <Border Grid.Row="0" CornerRadius="8" ClipToBounds="True" Margin="0,0,0,10">
                                                                    <Image Source="{Binding RoomImage, Converter={StaticResource ImageUrlToBitMap}}" 
                                                                           Stretch="Fill"/>
                                                                </Border>

                                                                
                                                                <StackPanel Grid.Row="1">
                                                                    <TextBlock Text="{Binding RoomType}" 
                                                                               FontSize="16" FontWeight="Bold" 
                                                                               Margin="0,0,0,5"/>
                                                                    <TextBlock Text="Room {Binding RoomNumber}" 
                                                                               FontSize="12" Foreground="#666" 
                                                                               Margin="0,0,0,8"/>
                                                                    
                                                                   
                                                                    <Border Background="#FFE8F5E8" CornerRadius="12" 
                                                                            Padding="8,4" HorizontalAlignment="Left" 
                                                                            Margin="0,0,0,10">
                                                                        <TextBlock Text="{Binding Status}" 
                                                                                   FontSize="11" Foreground="#FF4CAF50" 
                                                                                   FontWeight="SemiBold"/>
                                                                    </Border>

                                                                   
                                                                    <Grid>
                                                                        <Grid.ColumnDefinitions>
                                                                            <ColumnDefinition Width="*"/>
                                                                            <ColumnDefinition Width="Auto"/>
                                                                        </Grid.ColumnDefinitions>
                                                                        
                                                                        <StackPanel Grid.Column="0">
                                                                            <TextBlock Text="Price per night" 
                                                                                       FontSize="10" Foreground="#666"/>
                                                                            <TextBlock Text="{Binding PricePerNight, StringFormat='${0:F0}'}" 
                                                                                       FontSize="18" FontWeight="Bold" 
                                                                                       Foreground="#FF4CAF50"/>
                                                                        </StackPanel>
                                                                        
                                                                        <Button Grid.Column="1" Content="Book Now" 
                                                                                Style="{StaticResource PrimaryButton}"
                                                                                Width="80" Height="30"
                                                                                Command="{Binding DataContext.BookRoomCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                                                                CommandParameter="{Binding}"/>
                                                                    </Grid>
                                                                </StackPanel>
                                                            </Grid>
                                                        </Border>
                                                    </DataTemplate>
                                                </ItemsControl.ItemTemplate>
                                            </ItemsControl>
                                        </ScrollViewer>
                                    </Grid>
                                </Border>
                            </StackPanel>
                        </ScrollViewer>

                
                        <Button x:Name="btnChat" Width="60" Height="60"
                                HorizontalAlignment="Right"
                                VerticalAlignment="Bottom"
                                Margin="0,0,30,30"
                                BorderBrush="Transparent"
                                Cursor="Hand"
                                Padding="0" Grid.Column="1">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Template">
                                        <Setter.Value>
                                            <ControlTemplate TargetType="Button">
                                                <Grid>
                                                    <Ellipse Fill="#FF2196F3">
                                                        <Ellipse.Effect>
                                                            <DropShadowEffect Color="Black"
                                                                              Opacity="0.4"
                                                                              BlurRadius="10"/>
                                                        </Ellipse.Effect>
                                                    </Ellipse>
                                                    <Image Source="/Resources/Chatbotlogo.png"
                                                           Width="50" Height="50"
                                                           Stretch="UniformToFill"
                                                           CacheMode="BitmapCache"/>
                                                </Grid>
                                            </ControlTemplate>
                                        </Setter.Value>
                                    </Setter>
                                </Style>
                            </Button.Style>
                        </Button>

                        <Border x:Name="AIChatPanel" Grid.Column="1" Style="{StaticResource CardStyle}" 
                                Height="580" VerticalAlignment="Top" HorizontalAlignment="Right" 
                                Width="350" Margin="0,0,30,0" Visibility="Collapsed">
                            <Grid>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto"/>
                                    <RowDefinition Height="*"/>
                                    <RowDefinition Height="Auto"/>
                                </Grid.RowDefinitions>

       
                                <Border Grid.Row="0" Background="#FF2196F3">
                                    <Border.CornerRadius>
                                        <CornerRadius TopLeft="8" TopRight="8" BottomLeft="0" BottomRight="0"/>
                                    </Border.CornerRadius>
                                    <StackPanel Orientation="Horizontal"  Margin="15,12">
                                        <TextBlock Text="🤖 AI Travel Assistant" 
                                                   FontSize="16" FontWeight="Bold" Foreground="White" 
                                                   HorizontalAlignment="Center"/>
                                        <Button x:Name="btnCloseChat" Content="✖" BorderThickness="0" Background="Transparent" 
                                                Width="25" Height="25" Foreground="White" 
                                                HorizontalAlignment="Right" Margin="10,0,0,0"/>
                                    </StackPanel>
                                </Border>

                                <ScrollViewer Grid.Row="1" Margin="15" VerticalScrollBarVisibility="Auto">
                                    <ListBox bh:ListBoxExtensions.AutoScroll="True" IsEnabled="False" ItemsSource="{Binding Chats}">
                                        <ListBox.ItemContainerStyle>
                                            <Style TargetType="ListBoxItem">
                                                <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
                                            </Style>
                                        </ListBox.ItemContainerStyle>
                                        <ListBox.ItemTemplate>
                                            <DataTemplate>
                                                <StackPanel>
                                                    <Grid Margin="0,5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="Auto"/>
                                                            <ColumnDefinition Width="*"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Grid Grid.Column="0" Width="32" Height="32" Margin="0,0,8,0">
                                                            <Ellipse Fill="#FF2196F3"/>
                                                            <Image Source="/Resources/Chatbotlogo.png" Width="20" Height="20" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Grid>

                                                        <Border Grid.Column="1" HorizontalAlignment="Left" Background="#FFE8F5E8" CornerRadius="12" Margin="0,0,0,0" Padding="12">
                                                            <TextBlock Text="{Binding Response}" TextWrapping="Wrap" FontSize="12" MaxWidth="220"/>
                                                        </Border>
                                                    </Grid>

                                                    <Grid Margin="0,5">
                                                        <Grid.ColumnDefinitions>
                                                            <ColumnDefinition Width="*"/>
                                                            <ColumnDefinition Width="Auto"/>
                                                        </Grid.ColumnDefinitions>

                                                        <Border Grid.Column="0" HorizontalAlignment="Right" Background="#FFF0F8FF" CornerRadius="12" Margin="0,0,8,0" Padding="12">
                                                            <TextBlock Text="{Binding Message}" TextWrapping="Wrap" FontSize="12" TextAlignment="Right" MaxWidth="220"/>
                                                        </Border>

                                                        <Grid Grid.Column="1" Width="32" Height="32">
                                                            <Ellipse Fill="#FFBDBDBD"/>
                                                            <TextBlock Text="👤" FontSize="14" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </Grid>
                                                </StackPanel>
                                            </DataTemplate>
                                        </ListBox.ItemTemplate>
                                    </ListBox>
                                </ScrollViewer>

                                <Grid Grid.Row="2" Margin="15,10">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*"/>
                                        <ColumnDefinition Width="Auto"/>
                                    </Grid.ColumnDefinitions>

                                   
                                        <TextBox Grid.Column="0" x:Name="txtChatInput" 
                                                Style="{StaticResource ModernTextBox}"/>
                                   
                                    <Button Grid.Column="1" Content="➤" 
                                           Style="{StaticResource PrimaryButton}"
                                            Command="{Binding SendCommand}"
                                            CommandParameter="{Binding ElementName=txtChatInput, Path=Text}"
                                           Width="40" Height="35" Margin="8,0,0,0"
                                           FontWeight="Bold"/>
                                </Grid>
                            </Grid>
                        </Border>
                    </Grid>
                </Grid>
            </TabItem>


            <TabItem Style="{StaticResource TabItemStyle}" x:Name="MyBookingsTab" Header="📅 My Bookings" Visibility="Visible">
                <ScrollViewer Margin="30,20" VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="My Bookings" Style="{StaticResource HeaderTextStyle}" Margin="0,0,0,20"/>

                        <Border Style="{StaticResource CardStyle}">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>

                                <StackPanel Grid.Column="0">
                                    <Grid>
                                        <StackPanel>
                                            <TextBlock Text="Luxury Downtown Hotel" FontSize="20" FontWeight="Bold" Margin="0,0,0,5"/>
                                            <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
                                                <Rectangle Width="8" Height="8" Fill="#FF4CAF50" RadiusX="4" RadiusY="4" 
                                                          VerticalAlignment="Center" Margin="0,0,8,0"/>
                                                <TextBlock Text="Confirmed" Foreground="#FF4CAF50" FontWeight="SemiBold"/>
                                            </StackPanel>
                                        </StackPanel>
                                        <TextBlock Text="Booking #HTL-2024-001" 
                                                  FontSize="12" Foreground="#FF999999" 
                                                  HorizontalAlignment="Right" VerticalAlignment="Top"/>
                                    </Grid>

                                    <Grid Margin="0,15">
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>

                                        <StackPanel Grid.Column="0">
                                            <TextBlock Text="Check-in" FontSize="12" Foreground="#FF666666"/>
                                            <TextBlock Text="Sep 15, 2025" FontWeight="SemiBold"/>
                                            <TextBlock Text="3:00 PM" FontSize="12" Foreground="#FF666666"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="1">
                                            <TextBlock Text="Check-out" FontSize="12" Foreground="#FF666666"/>
                                            <TextBlock Text="Sep 17, 2025" FontWeight="SemiBold"/>
                                            <TextBlock Text="11:00 AM" FontSize="12" Foreground="#FF666666"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="2">
                                            <TextBlock Text="Guests" FontSize="12" Foreground="#FF666666"/>
                                            <TextBlock Text="2 Adults" FontWeight="SemiBold"/>
                                            <TextBlock Text="1 Room" FontSize="12" Foreground="#FF666666"/>
                                        </StackPanel>

                                        <StackPanel Grid.Column="3">
                                            <TextBlock Text="Total" FontSize="12" Foreground="#FF666666"/>
                                            <TextBlock Text="$240.00" FontWeight="Bold" FontSize="16" Foreground="#FF4CAF50"/>
                                            <TextBlock Text="2 nights" FontSize="12" Foreground="#FF666666"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                        <Button Content="📄 Details" Width="100" Style="{StaticResource SecondaryButton}" 
                                                Background="Transparent" Foreground="#FF2196F3" BorderThickness="1" BorderBrush="#FF2196F3"/>
                                        <Button Content="✏️ Modify" Width="100" Style="{StaticResource SecondaryButton}"/>
                                        <Button Content="❌ Cancel"  Width="100" Style="{StaticResource SecondaryButton}"/>
                                        <Button Content="⭐ Review"  Width="100" Style="{StaticResource SecondaryButton}"/>
                                    </StackPanel>
                                </StackPanel>
                            </Grid>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <TabItem Style="{StaticResource TabItemStyle}" x:Name="CustomerProfileTab" Header="👤 Profile" Visibility="Visible">
                <ScrollViewer Margin="30,20" VerticalScrollBarVisibility="Auto">
                    <Grid MaxWidth="900">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="300"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Margin="0,0,30,0">
                            <TextBlock Text="My Profile" Style="{StaticResource HeaderTextStyle}"/>

                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Margin="25">
                                    <TextBlock Text="Personal Information" FontSize="18" FontWeight="Bold" Margin="0,0,0,15"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Grid.Column="0" Margin="0,0,10,15">
                                            <TextBlock Text="First Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="Nguyen" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="0" Grid.Column="1" Margin="10,0,0,15">
                                            <TextBlock Text="Last Name" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="Van A" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="Email Address" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="nguyen.vana@email.com" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="2" Grid.Column="0" Margin="0,0,10,15">
                                            <TextBlock Text="Phone Number" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="+(84) 123-456-789" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="2" Grid.Column="1" Margin="10,0,0,15">
                                            <TextBlock Text="Date of Birth" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <DatePicker Style="{StaticResource ModernDatePicker}"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="3" Grid.ColumnSpan="2" Margin="0,0,0,15">
                                            <TextBlock Text="Address" FontWeight="SemiBold" Margin="0,0,0,5"/>
                                            <TextBox Text="123 Tran Hung Dao, Hoan Kiem, Hanoi" Style="{StaticResource ModernTextBox}"/>
                                        </StackPanel>
                                    </Grid>

                                    <StackPanel Orientation="Horizontal" Margin="0,15,0,0">
                                        <Button Content="💾 Update Profile" Width="150" Style="{StaticResource PrimaryButton}"/>
                                        <Button Content="🏪 Become Hotel Admin" Background="#FFFF9800" 
                                                Style="{StaticResource PrimaryButton}" Width="200"/>
                                    </StackPanel>
                                </StackPanel>
                            </Border>
                        </StackPanel>

                        <StackPanel Grid.Column="1">
                            <Border Style="{StaticResource CardStyle}">
                                <StackPanel Margin="25" HorizontalAlignment="Center">
                                    <Ellipse Width="80" Height="80" Fill="#FF2196F3" Margin="0,0,0,10"/>
                                    <TextBlock Text="Nguyen Van A" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                                    <TextBlock Text="Gold Member" FontSize="12" Foreground="#FFFF9800" 
                                              HorizontalAlignment="Center" FontWeight="SemiBold" Margin="0,5,0,15"/>

                                    <Grid>
                                        <Grid.ColumnDefinitions>
                                            <ColumnDefinition Width="*"/>
                                            <ColumnDefinition Width="*"/>
                                        </Grid.ColumnDefinitions>
                                        <Grid.RowDefinitions>
                                            <RowDefinition Height="Auto"/>
                                            <RowDefinition Height="Auto"/>
                                        </Grid.RowDefinitions>

                                        <StackPanel Grid.Row="0" Grid.Column="0" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="8" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Bookings" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="0" Grid.Column="1" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="23" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Nights" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="0" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="4" FontSize="20" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Cities" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>

                                        <StackPanel Grid.Row="1" Grid.Column="1" HorizontalAlignment="Center" Margin="0,5">
                                            <TextBlock Text="$1,850" FontSize="16" FontWeight="Bold" HorizontalAlignment="Center"/>
                                            <TextBlock Text="Spent" FontSize="10" Foreground="#FF666666" HorizontalAlignment="Center"/>
                                        </StackPanel>
                                    </Grid>
                                </StackPanel>
                            </Border>
                        </StackPanel>
                    </Grid>
                </ScrollViewer>
            </TabItem>
        </TabControl>
    </Grid>
</Window>
